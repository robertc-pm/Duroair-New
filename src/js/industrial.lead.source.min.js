IndustrialLeadSource=function(e,t){this.document=e,this.cookieNameSpace="ils.",this.domain=t||e.location.hostname,this.referrer=this.getReferrer(),this.utmParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],this.unkownSource="not set",this.unkownMedium="other",this.version="2.0.2",this.yearInMiuntes=525600;var r=this.getURLParameters(this.document.location.search),o=this.areUtmParamsPresent(r);this.getCookie("visit")&&!o||(o?this.handleUtmParams(r):this.isRealReferrer(this.referrer)?this.handleReferrer(this.referrer):this.hasStoredValue("utm_source")||this.hasStoredValue("utm_medium")||(this.unSetAllCookies(),this.setCookie("utm_source",this.unkownSource),this.setCookie("utm_medium",this.unkownMedium)),this.setCookie("visit",!0,30))},IndustrialLeadSource.prototype.hasStoredValue=function(e){var t=this.getStoredValues();return!!t[e]},IndustrialLeadSource.prototype.handleUtmParams=function(e){this.unSetAllCookies();for(var t=0;t<this.utmParams.length;t++){var r=this.utmParams[t];e[r]&&this.setCookie(r,e[r])}},IndustrialLeadSource.prototype.handleReferrer=function(e){this.unSetAllCookies(),this.isOrganic(e)?(this.setCookie("utm_medium","organic"),this.setCookie("utm_source",e)):(this.setCookie("utm_source",e),this.setCookie("utm_medium","referral"))},IndustrialLeadSource.prototype.isOrganic=function(e){for(var t=["google.","bing.com","yahoo.com","about.com","ask.com","duckduckgo.com"],r=0;r<t.length;r++){var o=t[r];if(e.indexOf(o)!==-1)return!0}return!1},IndustrialLeadSource.prototype.unSetAllCookies=function(){this.unSetCookie("utm_source"),this.unSetCookie("utm_medium"),this.unSetCookie("utm_campaign"),this.unSetCookie("utm_term"),this.unSetCookie("visit")},IndustrialLeadSource.prototype.getURLParameters=function(e){var t={};if(e){e=e.substring(1);try{t=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(e){console.log(e)}}return t},IndustrialLeadSource.prototype.getReferrer=function(){var e=this.getURLParameters(this.document.location.search),t=this.removeProtocol(document.referrer);return e.ils_referrer&&(t=e.ils_referrer),"none"===t&&(t=""),t},IndustrialLeadSource.prototype.areUtmParamsPresent=function(e){for(var t=0;t<this.utmParams.length;t++){var r=this.utmParams[t];if(e[r])return!0}return!1},IndustrialLeadSource.prototype.setCookie=function(e,t,r){var o=new Date,i=this.cookieNameSpace+e;r="undefined"!=typeof r?r:this.yearInMiuntes,o.setTime(o.getTime()+60*r*1e3);var u="expires="+o.toUTCString()+";";0===r&&(u=""),this.document.cookie=i+"="+t+";"+u+"path=/"},IndustrialLeadSource.prototype.unSetCookie=function(e,t,r){var o=this.cookieNameSpace+e;this.document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},IndustrialLeadSource.prototype.getCookie=function(e){for(var t=this.cookieNameSpace+e+"=",r=decodeURIComponent(this.document.cookie),o=r.split(";"),i=0;i<o.length;i++){for(var u=o[i];" "==u.charAt(0);)u=u.substring(1);if(0==u.indexOf(t))return u.substring(t.length,u.length)}return""},IndustrialLeadSource.prototype.removeProtocol=function(e){return e.replace(/.*?:\/\//g,"")},IndustrialLeadSource.prototype.getStoredValues=function(){var e={};return e.utm_source=this.getCookie("utm_source"),e.utm_medium=this.getCookie("utm_medium"),e.utm_campaign=this.getCookie("utm_campaign"),e.utm_term=this.getCookie("utm_term"),e},IndustrialLeadSource.prototype.isNotNullOrEmpty=function(e){return null!==e&&""!==e},IndustrialLeadSource.prototype.isRealReferrer=function(e){var t=!1;return e&&e.indexOf(this.domain)===-1&&(t=!0),t};